<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Apache Avro – Apache Avro™ 1.2.0 Documentation</title>
    <link>/docs/1.2.0/</link>
    <description>Recent content in Apache Avro™ 1.2.0 Documentation on Apache Avro</description>
    <generator>Hugo -- gohugo.io</generator>
    
	  <atom:link href="/docs/1.2.0/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
      
    
    
    <item>
      <title>Docs: Specification</title>
      <link>/docs/1.2.0/specification1/</link>
      <pubDate>Mon, 25 Oct 2021 00:00:00 +0000</pubDate>
      
      <guid>/docs/1.2.0/specification1/</guid>
      <description>
        
        
        &lt;!--

 Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
 &#34;License&#34;); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

   https://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 &#34;AS IS&#34; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.

--&gt;
&lt;h2 id=&#34;introduction&#34;&gt;Introduction&lt;/h2&gt;
&lt;p&gt;This document defines Avro. It is intended to be the authoritative specification. Implementations of Avro must adhere to this document.&lt;/p&gt;
&lt;h2 id=&#34;schema-declaration&#34;&gt;Schema Declaration&lt;/h2&gt;
&lt;p&gt;A Schema is represented in &lt;a href=&#34;https://www.json.org/&#34;&gt;JSON&lt;/a&gt; by one of:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A JSON string, naming a defined type.&lt;/li&gt;
&lt;li&gt;A JSON object, of the form:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;typeName&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;...&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;attributes&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;...}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;where &lt;em&gt;typeName&lt;/em&gt; is either a primitive or derived type name, as defined below. Attributes not defined in this document are permitted as metadata, but must not affect the format of serialized data.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A JSON array, representing a union of embedded types.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;primitive-types&#34;&gt;Primitive Types&lt;/h2&gt;
&lt;p&gt;The set of primitive type names is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;string: unicode character sequence&lt;/li&gt;
&lt;li&gt;bytes: sequence of 8-bit bytes&lt;/li&gt;
&lt;li&gt;&lt;em&gt;int&lt;/em&gt;: 32-bit signed integer&lt;/li&gt;
&lt;li&gt;&lt;em&gt;long&lt;/em&gt;: 64-bit signed integer&lt;/li&gt;
&lt;li&gt;&lt;em&gt;float&lt;/em&gt;: single precision (32-bit) IEEE 754 floating-point number&lt;/li&gt;
&lt;li&gt;&lt;em&gt;double&lt;/em&gt;: double precision (64-bit) IEEE 754 floating-point number&lt;/li&gt;
&lt;li&gt;boolean: a binary value&lt;/li&gt;
&lt;li&gt;null: no value&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Primitive types have no specified attributes.&lt;/p&gt;
&lt;p&gt;Primitive type names are also defined type names. Thus, for example, the schema &amp;ldquo;string&amp;rdquo; is equivalent to:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;complex-types&#34;&gt;Complex Types&lt;/h2&gt;
&lt;p&gt;Avro supports six kinds of complex types: &lt;em&gt;records&lt;/em&gt;, &lt;em&gt;enums&lt;/em&gt;, &lt;em&gt;arrays&lt;/em&gt;, &lt;em&gt;maps&lt;/em&gt;, &lt;em&gt;unions&lt;/em&gt; and &lt;em&gt;fixed&lt;/em&gt;.&lt;/p&gt;
&lt;h3 id=&#34;schema-record&#34;&gt;Records&lt;/h3&gt;
&lt;p&gt;Records use the type name &amp;ldquo;record&amp;rdquo; and support three attributes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;name&lt;/em&gt;: a JSON string providing the name of the record (required).&lt;/li&gt;
&lt;li&gt;&lt;em&gt;doc&lt;/em&gt;: a JSON string providing documentation to the user of this schema (optional).&lt;/li&gt;
&lt;li&gt;&lt;em&gt;fields&lt;/em&gt;: a JSON array, listing fields (required). Each field is a JSON object with the following attributes:
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;name&lt;/em&gt;: a JSON string providing the name of the field (required), and&lt;/li&gt;
&lt;li&gt;&lt;em&gt;type&lt;/em&gt;:  A JSON object defining a schema, or a JSON string naming a record definition (required).&lt;/li&gt;
&lt;li&gt;default: A default value for this field, used when reading instances that lack this field (optional). Permitted values depend on the field’s schema type, according to the table below. Default values for union fields correspond to the first schema in the union.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;field default values&lt;/em&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;avro type&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;json type&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;example&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;&lt;code&gt;&amp;quot;foo&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;bytes&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;&lt;code&gt;&amp;quot;\u00FF&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;int,long&lt;/td&gt;
&lt;td&gt;integer&lt;/td&gt;
&lt;td&gt;&lt;code&gt;1&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;float,double&lt;/td&gt;
&lt;td&gt;number&lt;/td&gt;
&lt;td&gt;&lt;code&gt;1.1&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;boolean&lt;/td&gt;
&lt;td&gt;boolean&lt;/td&gt;
&lt;td&gt;&lt;code&gt;true&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;null&lt;/td&gt;
&lt;td&gt;null&lt;/td&gt;
&lt;td&gt;&lt;code&gt;null&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;record&lt;/td&gt;
&lt;td&gt;object&lt;/td&gt;
&lt;td&gt;&lt;code&gt;{&amp;quot;a&amp;quot;: 1}&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;enum&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;&lt;code&gt;&amp;quot;FOO&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;array&lt;/td&gt;
&lt;td&gt;array&lt;/td&gt;
&lt;td&gt;&lt;code&gt;[1]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;map&lt;/td&gt;
&lt;td&gt;object&lt;/td&gt;
&lt;td&gt;&lt;code&gt;{&amp;quot;a&amp;quot;: 1}&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;fixed&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;&lt;code&gt;&amp;quot;\u00ff&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;order&lt;/em&gt;: specifies how this field impacts sort ordering of this record (optional). Valid values are &amp;ldquo;ascending&amp;rdquo; (the default), &amp;ldquo;descending&amp;rdquo;, or &amp;ldquo;ignore&amp;rdquo;. For more details on how this is used, see the sort order section below.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For example, a linked-list of 64-bit values may be defined with:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-jsonc&#34; data-lang=&#34;jsonc&#34;&gt;{
  &amp;#34;type&amp;#34;: &amp;#34;record&amp;#34;,
  &amp;#34;name&amp;#34;: &amp;#34;LongList&amp;#34;,
  &amp;#34;fields&amp;#34; : [
    {&amp;#34;name&amp;#34;: &amp;#34;value&amp;#34;, &amp;#34;type&amp;#34;: &amp;#34;long&amp;#34;},             // each element has a long
    {&amp;#34;name&amp;#34;: &amp;#34;next&amp;#34;, &amp;#34;type&amp;#34;: [&amp;#34;LongList&amp;#34;, &amp;#34;null&amp;#34;]} // optional next element
  ]
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;enums&#34;&gt;Enums&lt;/h3&gt;
&lt;p&gt;Enums use the type name &amp;ldquo;enum&amp;rdquo; and support the following attributes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;name&lt;/em&gt;: a JSON string providing the name of the enum (required).&lt;/li&gt;
&lt;li&gt;&lt;em&gt;symbols&lt;/em&gt;: a JSON array, listing symbols, as JSON strings (required).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For example, playing card suits might be defined with:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;enum&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Suit&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;symbols&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;SPADES&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;HEARTS&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;DIAMONDS&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;CLUBS&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;arrays&#34;&gt;Arrays&lt;/h3&gt;
&lt;p&gt;Arrays use the type name &amp;ldquo;array&amp;rdquo; and support a single attribute:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;items&lt;/em&gt;: the schema of the array&amp;rsquo;s items.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For example, an array of strings is declared with:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;array&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;items&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;maps&#34;&gt;Maps&lt;/h3&gt;
&lt;p&gt;Maps use the type name &amp;ldquo;map&amp;rdquo; and support one attribute:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;values&lt;/em&gt;: the schema of the map&amp;rsquo;s values.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Map keys are assumed to be strings.&lt;/p&gt;
&lt;p&gt;For example, a map from string to long is declared with:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;map&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;values&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;long&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;unions&#34;&gt;Unions&lt;/h3&gt;
&lt;p&gt;Unions, as mentioned above, are represented using JSON arrays. For example, &lt;code&gt;[&amp;quot;string&amp;quot;, &amp;quot;null&amp;quot;]&lt;/code&gt; declares a schema which may be either a string or null.&lt;/p&gt;
&lt;p&gt;Unions may not contain more than one schema with the same type, except for the named types record, fixed and enum. For example, unions containing two array types or two map types are not permitted, but two types with different names are permitted. (Names permit efficient resolution when reading and writing unions.)&lt;/p&gt;
&lt;p&gt;Unions may not immediately contain other unions.&lt;/p&gt;
&lt;h3 id=&#34;fixed&#34;&gt;Fixed&lt;/h3&gt;
&lt;p&gt;Fixed uses the type name &amp;ldquo;fixed&amp;rdquo; and supports three attributes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;name&lt;/em&gt;: the name of the fixed (required).&lt;/li&gt;
&lt;li&gt;&lt;em&gt;size&lt;/em&gt;: an integer, specifying the number of bytes per value (required).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For example, 16-byte quantity may be declared with:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;fixed&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;size&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;16&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;md5&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;identifiers&#34;&gt;Identifiers&lt;/h3&gt;
&lt;p&gt;Record, field and enum names must:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;start with [A-Za-z_]&lt;/li&gt;
&lt;li&gt;subsequently contain only [A-Za-z0-9_]&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;data-serialization&#34;&gt;Data Serialization&lt;/h2&gt;
&lt;p&gt;Avro data is always serialized with its schema. Files that store Avro data should always also include the schema for that data in the same file. Avro-based remote procedure call (RPC) systems must also guarantee that remote recipients of data have a copy of the schema used to write that data.&lt;/p&gt;
&lt;p&gt;Because the schema used to write data is always available when the data is read, Avro data itself is not tagged with type information. The schema is required to parse data.&lt;/p&gt;
&lt;p&gt;In general, both serialization and deserialization proceed as a depth-first, left-to-right traversal of the schema, serializing primitive types as they are encountered.&lt;/p&gt;
&lt;h3 id=&#34;encodings&#34;&gt;Encodings&lt;/h3&gt;
&lt;p&gt;Avro specifies two serialization encodings: binary and JSON. Most applications will use the binary encoding, as it is smaller and faster. But, for debugging and web-based applications, the JSON encoding may sometimes be appropriate.&lt;/p&gt;
&lt;h3 id=&#34;binary-encoding&#34;&gt;Binary Encoding&lt;/h3&gt;
&lt;h4 id=&#34;primitive-types-1&#34;&gt;Primitive Types&lt;/h4&gt;
&lt;p&gt;Primitive types are encoded in binary as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a string is encoded as a long followed by that many bytes of UTF-8 encoded character data.&lt;/li&gt;
&lt;li&gt;For example, the three-character string &amp;ldquo;foo&amp;rdquo; would be encoded as the long value 3 (encoded as hex 06) followed by the UTF-8 encoding of &amp;lsquo;f&amp;rsquo;, &amp;lsquo;o&amp;rsquo;, and &amp;lsquo;o&amp;rsquo; (the hex bytes 66 6f 6f):
06 66 6f 6f bytes are encoded as a long followed by that many bytes of data.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;int&lt;/em&gt; and &lt;em&gt;long&lt;/em&gt; values are written using &lt;a href=&#34;https://lucene.apache.org/java/3_5_0/fileformats.html#VInt&#34;&gt;variable-length&lt;/a&gt; &lt;a href=&#34;https://code.google.com/apis/protocolbuffers/docs/encoding.html#types&#34;&gt;zig-zag&lt;/a&gt; coding. Some examples:&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;em&gt;value&lt;/em&gt;&lt;/th&gt;
&lt;th&gt;&lt;em&gt;hex&lt;/em&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-1&lt;/td&gt;
&lt;td&gt;01&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;02&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-2&lt;/td&gt;
&lt;td&gt;03&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;04&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;hellip;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-64&lt;/td&gt;
&lt;td&gt;7f&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;64&lt;/td&gt;
&lt;td&gt;80 01&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;hellip;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;a &lt;em&gt;float&lt;/em&gt; is written as 4 bytes. The float is converted into a 32-bit integer using a method equivalent to Java&amp;rsquo;s &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/lang/Float.html#floatToIntBits-float-&#34;&gt;floatToIntBits&lt;/a&gt; and then encoded in little-endian format.&lt;/li&gt;
&lt;li&gt;a &lt;em&gt;double&lt;/em&gt; is written as 8 bytes. The double is converted into a 64-bit integer using a method equivalent to Java&amp;rsquo;s &lt;a href=&#34;https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html#doubleToLongBits-double-&#34;&gt;doubleToLongBits&lt;/a&gt; and then encoded in little-endian format.&lt;/li&gt;
&lt;li&gt;a boolean is written as a single byte whose value is either 0 (false) or 1 (true).
null is written as zero bytes.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;complex-types-1&#34;&gt;Complex Types&lt;/h3&gt;
&lt;p&gt;Complex types are encoded in binary as follows:&lt;/p&gt;
&lt;h4 id=&#34;records&#34;&gt;Records&lt;/h4&gt;
&lt;p&gt;A record is encoded by encoding the values of its fields in the order that they are declared. In other words, a record is encode as just the concatenation of its field&amp;rsquo;s encodings. Field values are encoded per their schema.&lt;/p&gt;
&lt;p&gt;For example, the record schema.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;record&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;test&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;fields&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;long&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;b&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;An instance of this record whose a field has value 27 (encoded as hex 36) and whose b field has value &amp;ldquo;foo&amp;rdquo; (encoded as hex bytes 06 66 6f 6f), would be encoded simply as the concatenation of these, namely the hex byte sequence:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;36 06 66 6f 6f
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;enums-1&#34;&gt;Enums&lt;/h4&gt;
&lt;p&gt;An enum is encoded by a int, representing the zero-based position of the symbol in the schema.&lt;/p&gt;
&lt;p&gt;For example, consider the enum:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;enum&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Foo&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;symbols&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;C&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;D&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This would be encoded by an int between zero and three, with zero indicating &amp;ldquo;A&amp;rdquo;, and 3 indicating &amp;ldquo;D&amp;rdquo;.&lt;/p&gt;
&lt;h4 id=&#34;arrays-1&#34;&gt;Arrays&lt;/h4&gt;
&lt;p&gt;Arrays are encoded as a series of blocks. Each block consists of a long count value, followed by that many array items. A block with count zero indicates the end of the array. Each item is encoded per the array&amp;rsquo;s item schema.&lt;/p&gt;
&lt;p&gt;If a block&amp;rsquo;s count is negative, then the count is followed immediately by a long block size, indicating the number of bytes in the block. The actual count in this case is the absolute value of the count written.&lt;/p&gt;
&lt;p&gt;For example, the array schema&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;array&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;items&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;long&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;an array containing the items 3 and 27 could be encoded as the long value 2 (encoded as hex 04) followed by long values 3 and 27 (encoded as hex 06 36) terminated by zero:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;04 06 36 00
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The blocked representation permits one to read and write arrays larger than can be buffered in memory, since one can start writing items without knowing the full length of the array. The optional block sizes permit fast skipping through data, e.g., when projecting a record to a subset of its fields.&lt;/p&gt;
&lt;h4 id=&#34;schema-maps&#34;&gt;Maps&lt;/h4&gt;
&lt;p&gt;Maps are encoded as a series of &lt;em&gt;blocks&lt;/em&gt;. Each block consists of a &lt;code&gt;long&lt;/code&gt; &lt;em&gt;count&lt;/em&gt; value, followed by that many key/value pairs. A block with count zero indicates the end of the map. Each item is encoded per the map&amp;rsquo;s value schema.&lt;/p&gt;
&lt;p&gt;If a block&amp;rsquo;s count is negative, then the count is followed immediately by a long block size, indicating the number of bytes in the block. The actual count in this case is the absolute value of the count written.&lt;/p&gt;
&lt;p&gt;The blocked representation permits one to read and write maps larger than can be buffered in memory, since one can start writing items without knowing the full length of the map. The optional block sizes permit fast skipping through data, e.g., when projecting a record to a subset of its fields.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NOTE&lt;/strong&gt;: Blocking has not yet been fully implemented and may change. Arbitrarily large objects must be easily writable and readable but until we have proven this with an implementation and tests this part of the specification should be considered draft.&lt;/p&gt;
&lt;h4 id=&#34;unions-1&#34;&gt;Unions&lt;/h4&gt;
&lt;p&gt;A union is encoded by first writing a &lt;code&gt;long&lt;/code&gt; value indicating the zero-based position within the union of the schema of its value. The value is then encoded per the indicated schema within the union.&lt;/p&gt;
&lt;p&gt;For example, the union schema &lt;code&gt;[&amp;quot;string&amp;quot;,&amp;quot;null&amp;quot;]&lt;/code&gt; would encode:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;null as the integer 1 (the index of &amp;ldquo;null&amp;rdquo; in the union, encoded as hex 02):
02&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;the string &amp;ldquo;a&amp;rdquo; as zero (the index of &amp;ldquo;string&amp;rdquo; in the union), followed by the serialized string:
&lt;code&gt;00 02 61&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;fixed-1&#34;&gt;Fixed&lt;/h4&gt;
&lt;p&gt;Fixed instances are encoded using the number of bytes declared in the schema.&lt;/p&gt;
&lt;h3 id=&#34;json-encoding&#34;&gt;JSON Encoding&lt;/h3&gt;
&lt;p&gt;Except for unions, the JSON encoding is the same as is used to encode &lt;a href=&#34;#schema-record&#34;&gt;field default values&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The value of a union is encoded in JSON as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;if its type is &lt;em&gt;null&lt;/em&gt;, then it is encoded as a JSON &lt;em&gt;null&lt;/em&gt;;&lt;/li&gt;
&lt;li&gt;otherwise it is encoded as a JSON object with one name/value pair whose name is the type&amp;rsquo;s name and whose value is the recursively encoded value. For Avro&amp;rsquo;s named types (record, fixed or enum) the user-specified name is used, for other types the type name is used.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For example, the union schema &lt;code&gt;[&amp;quot;null&amp;quot;,&amp;quot;string&amp;quot;,&amp;quot;Foo&amp;quot;]&lt;/code&gt;, where Foo is a record name, would encode:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;null&lt;/em&gt; as &lt;em&gt;null&lt;/em&gt;;&lt;/li&gt;
&lt;li&gt;the string &amp;ldquo;a&amp;rdquo; as &lt;code&gt;{&amp;quot;string&amp;quot;: &amp;quot;a&amp;quot;}&lt;/code&gt; and&lt;/li&gt;
&lt;li&gt;a Foo instance as &lt;code&gt;{&amp;quot;Foo&amp;quot;: {...}}&lt;/code&gt;, where &lt;code&gt;{...}&lt;/code&gt; indicates the JSON encoding of a Foo instance.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Note that a schema is still required to correctly process JSON-encoded data. For example, the JSON encoding does not distinguish between int and long, float and double, records and maps, enums and strings, etc.&lt;/p&gt;
&lt;h2 id=&#34;sort-order&#34;&gt;Sort Order&lt;/h2&gt;
&lt;p&gt;Avro defines a standard sort order for data. This permits data written by one system to be efficiently sorted by another system. This can be an important optimization, as sort order comparisons are sometimes the most frequent per-object operation. Note also that Avro binary-encoded data can be efficiently ordered without deserializing it to objects.&lt;/p&gt;
&lt;p&gt;Data items may only be compared if they have identical schemas. Pairwise comparisons are implemented recursively with a depth-first, left-to-right traversal of the schema. The first mismatch encountered determines the order of the items.&lt;/p&gt;
&lt;p&gt;Two items with the same schema are compared according to the following rules.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;int&lt;/em&gt;, &lt;em&gt;long&lt;/em&gt;, &lt;em&gt;float&lt;/em&gt; and &lt;em&gt;double&lt;/em&gt; data is ordered by ascending numeric value.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;boolean&lt;/em&gt; data is ordered with false before true.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;null&lt;/em&gt; data is always equal.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;string&lt;/em&gt; data is compared lexicographically. Note that since UTF-8 is used as the binary encoding of strings, sorting by bytes and characters is equivalent.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;bytes&lt;/em&gt; and fixed data are compared lexicographically by byte.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;array&lt;/em&gt; data is compared lexicographically by element.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;enum&lt;/em&gt; data is ordered by the symbol&amp;rsquo;s position in the enum schema. For example, an enum whose symbols are &lt;code&gt;[&amp;quot;z&amp;quot;, &amp;quot;a&amp;quot;]&lt;/code&gt; would sort &amp;ldquo;z&amp;rdquo; values before &amp;ldquo;a&amp;rdquo; values.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;union&lt;/em&gt; data is first ordered by the branch within the union, and, within that, by the type of the branch. For example, an &lt;code&gt;[&amp;quot;int&amp;quot;, &amp;quot;string&amp;quot;]&lt;/code&gt; union would order all int values before all string values, with the ints and strings themselves ordered as defined above.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;record&lt;/em&gt; data is ordered lexicographically by field. If a field specifies that its order is:
&lt;ul&gt;
&lt;li&gt;&amp;ldquo;ascending&amp;rdquo;, then the order of its values is unaltered.&lt;/li&gt;
&lt;li&gt;&amp;ldquo;descending&amp;rdquo;, then the order of its values is reversed.&lt;/li&gt;
&lt;li&gt;&amp;ldquo;ignore&amp;rdquo;, then its values are ignored when sorting.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;em&gt;map&lt;/em&gt; data may not be compared. It is an error to attempt to compare data containing maps unless those maps are in an &lt;code&gt;&amp;quot;order&amp;quot;:&amp;quot;ignore&amp;quot;&lt;/code&gt; record field.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;object-container-files&#34;&gt;Object Container Files&lt;/h2&gt;
&lt;p&gt;Avro includes a simple object container file format. A file has a schema, and all objects stored in the file must be written according to that schema. Objects are stored in blocks that may be compressed. Syncronization markers are used between blocks to permit efficient splitting of files for MapReduce processing.&lt;/p&gt;
&lt;p&gt;Files may include arbitrary user-specified metadata.&lt;/p&gt;
&lt;p&gt;A file consists of:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A header, followed by&lt;/li&gt;
&lt;li&gt;one or more blocks.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There are two kinds of blocks, normal and metadata. All files must contain at least one metadata block. A file terminates with its last metadata block. Any data after the last metadata block is ignored.&lt;/p&gt;
&lt;p&gt;A header consists of:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Four bytes, ASCII &amp;lsquo;O&amp;rsquo;, &amp;lsquo;b&amp;rsquo;, &amp;lsquo;j&amp;rsquo;, followed by zero.&lt;/li&gt;
&lt;li&gt;A 16-byte sync marker.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A metadata block consists of:&lt;/p&gt;
&lt;p&gt;The file&amp;rsquo;s 16-byte sync marker.
A long with value -1, identifying this as a metadata block.
A long indicating the size in bytes of this block.
A long indicating the number of metadata key/value pairs.
For each pair, a string key and bytes value.
The size in bytes of this block as a 4-byte big-endian integer.
When a file is closed normally, this terminates the file and permits one to efficiently seek to the start of the metadata. If the sync marker there does not match that at the start of the file, then one must scan for the last metadata in the file.&lt;/p&gt;
&lt;p&gt;The following metadata properties are reserved:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;schema&lt;/strong&gt; contains the schema of objects stored in the file, as a string.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;count&lt;/strong&gt; contains the number of objects in the file as a decimal ASCII string.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;codec&lt;/strong&gt; codec the name of the compression codec used to compress blocks, as a string. The only value for codec currently supported is &amp;ldquo;null&amp;rdquo; (meaning no compression is performed). If codec is absent, it is assumed to be &amp;ldquo;null&amp;rdquo;.
sync the 16-byte sync marker used in this file, as a byte sequence.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A normal block consists of:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The file&amp;rsquo;s 16-byte sync marker.&lt;/li&gt;
&lt;li&gt;A long indicating the size in bytes of this block in the file.&lt;/li&gt;
&lt;li&gt;The serialized objects. If a codec is specified, this is compressed by that codec.&lt;/li&gt;
&lt;li&gt;Note that this format supports appends, since multiple metadata blocks are permitted.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To be robust to application failure, implementations can write metadata periodically to limit the amount of the file that must be scanned to find the last metadata block.&lt;/p&gt;
&lt;h3 id=&#34;protocol-declaration&#34;&gt;Protocol Declaration&lt;/h3&gt;
&lt;p&gt;Avro protocols describe RPC interfaces. Like schemas, they are defined with JSON text.&lt;/p&gt;
&lt;p&gt;A protocol is a JSON object with the following attributes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;name&lt;/em&gt;, string, to distinguish it from other protocols;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;namespace&lt;/em&gt;, a string which qualifies the name;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;types&lt;/em&gt;, a list of record, enum and error definitions. An error definition is just like a record definition except it uses &amp;ldquo;error&amp;rdquo; instead of &amp;ldquo;record&amp;rdquo;. Note that forward references to records, enums and errors are not currently supported.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;messages&lt;/em&gt;, a JSON object whose keys are message names and whose values are objects whose attributes are described below. No two messages may have the same name.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;messages&#34;&gt;Messages&lt;/h3&gt;
&lt;p&gt;A message has attributes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a &lt;em&gt;request&lt;/em&gt;, a list of named, typed parameter schemas (this has the same form as the fields of a record declaration);&lt;/li&gt;
&lt;li&gt;a &lt;em&gt;response&lt;/em&gt; schema; and&lt;/li&gt;
&lt;li&gt;an optional union of error schemas.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A request parameter list is processed equivalently to an anonymous record. Since record field lists may vary between reader and writer, request parameters may also differ between the caller and responder, and such differences are resolved in the same manner as record field differences.&lt;/p&gt;
&lt;h3 id=&#34;sample-protocol&#34;&gt;Sample Protocol&lt;/h3&gt;
&lt;p&gt;For example, one may define a simple HelloWorld protocol with:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;namespace&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;com.acme&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;protocol&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;HelloWorld&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;types&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Greeting&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;record&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;fields&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}]},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Curse&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;error&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;fields&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}]}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;messages&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;hello&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;request&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;greeting&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Greeting&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;response&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Greeting&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;errors&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Curse&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;protocol-wire-format&#34;&gt;Protocol Wire Format&lt;/h2&gt;
&lt;h3 id=&#34;message-transport&#34;&gt;Message Transport&lt;/h3&gt;
&lt;p&gt;Messages may be transmitted via different transport mechanisms. For example, one might use the HTTP, raw sockets, or SSL, etc. This document specifies formats for request and response message data, but it does not yet specify any details of how message data is encapsulated in different transports.&lt;/p&gt;
&lt;p&gt;To the transport, a &lt;em&gt;message&lt;/em&gt; is an opaque byte sequence.&lt;/p&gt;
&lt;p&gt;A transport is a system that supports:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;transmission of request messages&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;receipt of corresponding response messages&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Servers will send a response message back to the client corresponding to each request message. The mechanism of that correspondance is transport-specific. For example, in HTTP it might be implicit, since HTTP directly supports requests and responses. But a transport that multiplexes many client threads over a single socket would need to tag messages with unique identifiers.&lt;/p&gt;
&lt;h3 id=&#34;message-framing&#34;&gt;Message Framing&lt;/h3&gt;
&lt;p&gt;Avro messages are &lt;em&gt;framed&lt;/em&gt; as a list of buffers.&lt;/p&gt;
&lt;p&gt;Framing is a layer between messages and the transport. It exists to optimize certain operations.&lt;/p&gt;
&lt;p&gt;The format of framed message data is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a series of buffers, where each buffer consists of:
&lt;ul&gt;
&lt;li&gt;a four-byte, big-endian &lt;em&gt;buffer length&lt;/em&gt;, followed by&lt;/li&gt;
&lt;li&gt;that many bytes of &lt;em&gt;buffer&lt;/em&gt; data.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;A message is always terminated by a zero-lenghted buffer.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Framing is transparent to request and response message formats (described below). Any message may be presented as a single or multiple buffers.&lt;/p&gt;
&lt;p&gt;Framing can permit readers to more efficiently get different buffers from different sources and for writers to more efficiently store different buffers to different destinations. In particular, it can reduce the number of times large binary objects are copied. For example, if an RPC parameter consists of a megabyte of file data, that data can be copied directly to a socket from a file descriptor, and, on the other end, it could be written directly to a file descriptor, never entering user space.&lt;/p&gt;
&lt;p&gt;A simple, recommended, framing policy is for writers to create a new segment whenever a single binary object is written that is larger than a normal output buffer. Small objects are then appended in buffers, while larger objects are written as their own buffers. When a reader then tries to read a large object the runtime can hand it an entire buffer directly, without having to copy it.&lt;/p&gt;
&lt;h3 id=&#34;handshake&#34;&gt;Handshake&lt;/h3&gt;
&lt;p&gt;RPC requests and responses are prefixed by handshakes. The purpose of the handshake is to ensure that the client and the server have each other&amp;rsquo;s protocol definition, so that the client can correctly deserialize responses, and the server can correctly deserialize requests. Both clients and servers should maintain a cache of recently seen protocols, so that, in most cases, a handshake will be completed without extra round-trip network exchanges or the transmission of full protocol text.&lt;/p&gt;
&lt;p&gt;The handshake process uses the following record schemas:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;record&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;HandshakeRequest&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;namespace&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;org.apache.avro.ipc&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;fields&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;clientHash&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;fixed&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;MD5&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;size&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;16&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;clientProtocol&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;null&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;]},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;serverHash&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;MD5&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;meta&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;null&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;map&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;values&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;bytes&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}]}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;record&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;HandshakeResponse&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;namespace&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;org.apache.avro.ipc&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;fields&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;match&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;enum&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;HandshakeMatch&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;symbols&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;BOTH&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;CLIENT&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;NONE&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;]}},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;serverProtocol&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;null&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;]},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;serverHash&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;null&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;fixed&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;MD5&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;size&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;16&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}]},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;meta&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;null&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;map&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;values&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;bytes&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}]}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;A client first prefixes each request with a &lt;code&gt;HandshakeRequest&lt;/code&gt; containing just the hash of its protocol and of the server&amp;rsquo;s protocol (&lt;code&gt;clientHash!=null, clientProtocol=null, serverHash!=null&lt;/code&gt;), where the hashes are 128-bit MD5 hashes of the JSON protocol text. If a client has never connected to a given server, it sends its hash as a guess of the server&amp;rsquo;s hash, otherwise it sends the hash that it previously obtained from this server.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The server responds with a HandshakeResponse containing one of:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;match=BOTH, serverProtocol=null, serverHash=null&lt;/code&gt; if the client sent the valid hash of the server&amp;rsquo;s protocol and the server knows what protocol corresponds to the client&amp;rsquo;s hash. In this case, the request is complete and the response data immediately follows the HandshakeResponse.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;match=CLIENT, serverProtocol!=null, serverHash!=null&lt;/code&gt; if the server has previously seen the client&amp;rsquo;s protocol, but the client sent an incorrect hash of the server&amp;rsquo;s protocol. The request is complete and the response data immediately follows the HandshakeResponse. The client must use the returned protocol to process the response and should also cache that protocol and its hash for future interactions with this server.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;match=NONE&lt;/code&gt; serverProtocol!=null, serverHash!=null if the server has not previously seen the client&amp;rsquo;s protocol and the client sent an incorrect hash of the server&amp;rsquo;s protocol.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In this case The client must then re-submit its request with its protocol text (&lt;code&gt;clientHash!=null, clientProtocol!=null, serverHash!=null&lt;/code&gt;) and the server should respond with with a successful match (match=BOTH, serverProtocol=null, serverHash=null) as above.&lt;/p&gt;
&lt;p&gt;The meta field is reserved for future handshake enhancements.&lt;/p&gt;
&lt;h3 id=&#34;call-format&#34;&gt;Call Format&lt;/h3&gt;
&lt;p&gt;A &lt;em&gt;call&lt;/em&gt; consists of a request message paired with its resulting response or error message. Requests and responses contain extensible metadata, and both kinds of messages are framed as described above.&lt;/p&gt;
&lt;p&gt;The format of a call request is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;request metadata&lt;/em&gt;, a map with values of type bytes&lt;/li&gt;
&lt;li&gt;the &lt;em&gt;message name&lt;/em&gt;, an Avro string, followed by&lt;/li&gt;
&lt;li&gt;the &lt;em&gt;message parameters&lt;/em&gt;. Parameters are serialized according to the message&amp;rsquo;s request declaration.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The format of a call response is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;response metadata&lt;/em&gt;, a map with values of type bytes&lt;/li&gt;
&lt;li&gt;a one-byte error &lt;em&gt;flag&lt;/em&gt; boolean, followed by either:
&lt;ul&gt;
&lt;li&gt;if the error flag is false, the message &lt;em&gt;response&lt;/em&gt;, serialized per the message&amp;rsquo;s response schema.&lt;/li&gt;
&lt;li&gt;if the error flag is true, the error, serialized per the message&amp;rsquo;s error union schema.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;schema-resolution&#34;&gt;Schema Resolution&lt;/h3&gt;
&lt;p&gt;A reader of Avro data, whether from an RPC or a file, can always parse that data because its schema is provided. But that schema may not be exactly the schema that was expected. For example, if the data was written with a different version of the software than it is read, then records may have had fields added or removed. This section specifies how such schema differences should be resolved.&lt;/p&gt;
&lt;p&gt;We call the schema used to write the data as the writer&amp;rsquo;s schema, and the schema that the application expects the reader&amp;rsquo;s schema. Differences between these should be resolved as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It is an error if the two schemas do not &lt;em&gt;match&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To match, one of the following must hold:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;both schemas are arrays whose item types match&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;both schemas are maps whose value types match&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;both schemas are enums whose names match&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;both schemas are fixed whose sizes and names match&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;both schemas are records with the same name&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;either schema is a union&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;both schemas have same primitive type&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;the writer&amp;rsquo;s schema may be promoted to the reader&amp;rsquo;s as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;int is promotable to long, float, or double&lt;/li&gt;
&lt;li&gt;long is promotable to float or double&lt;/li&gt;
&lt;li&gt;float is promotable to double&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;if both are records&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the ordering of fields may be different: fields are matched by name.&lt;/li&gt;
&lt;li&gt;schemas for fields with the same name in both records are resolved recursively.&lt;/li&gt;
&lt;li&gt;if the writer&amp;rsquo;s record contains a field with a name not present in the reader&amp;rsquo;s record, the writer&amp;rsquo;s value for that field is ignored.&lt;/li&gt;
&lt;li&gt;if the reader&amp;rsquo;s record schema has a field that contains a default value, and writer&amp;rsquo;s schema does not have a field with the same name, then the reader should use the default value from its field.&lt;/li&gt;
&lt;li&gt;if the reader&amp;rsquo;s record schema has a field with no default value, and writer&amp;rsquo;s schema does not have a field with the same name, then the field&amp;rsquo;s value is unset.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;if both are enums&lt;/strong&gt;:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;if the writer&amp;rsquo;s symbol is not present in the reader&amp;rsquo;s enum, then the enum&amp;rsquo;s value is unset.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;if both are arrays&lt;/strong&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This resolution algorithm is applied recursively to the reader&amp;rsquo;s and writer&amp;rsquo;s array item schemas.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;if both are maps&lt;/strong&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This resolution algorithm is applied recursively to the reader&amp;rsquo;s and writer&amp;rsquo;s value schemas.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;if both are unions&lt;/strong&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The first schema in the reader&amp;rsquo;s union that matches the selected writer&amp;rsquo;s union schema is recursively resolved against it. if none match, an error is signalled.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;if reader&amp;rsquo;s is a union, but writer&amp;rsquo;s is not&lt;/strong&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The first schema in the reader&amp;rsquo;s union that matches the writer&amp;rsquo;s schema is recursively resolved against it. If none match, an error is signalled.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;if writer&amp;rsquo;s is a union, but reader&amp;rsquo;s is not&lt;/strong&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If the reader&amp;rsquo;s schema matches the selected writer&amp;rsquo;s schema, it is recursively resolved against it. If they do not match, an error is signalled.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: Wiki</title>
      <link>/docs/1.2.0/wiki/</link>
      <pubDate>Mon, 25 Oct 2021 00:00:00 +0000</pubDate>
      
      <guid>/docs/1.2.0/wiki/</guid>
      <description>
        
        
        &lt;!--

 Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
 &#34;License&#34;); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

   https://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 &#34;AS IS&#34; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.

--&gt;
&lt;p&gt;The Wiki page can be found &lt;a href=&#34;https://cwiki.apache.org/confluence/display/HADOOP2/Avro/&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: FAQ</title>
      <link>/docs/1.2.0/faq/</link>
      <pubDate>Mon, 25 Oct 2021 00:00:00 +0000</pubDate>
      
      <guid>/docs/1.2.0/faq/</guid>
      <description>
        
        
        &lt;!--

 Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
 &#34;License&#34;); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

   https://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 &#34;AS IS&#34; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.

--&gt;
&lt;h2 id=&#34;what-is-avro&#34;&gt;What is Avro?&lt;/h2&gt;
&lt;p&gt;Avro is a data serialization system.&lt;/p&gt;
&lt;p&gt;Avro provides:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Rich data structures.&lt;/li&gt;
&lt;li&gt;A compact, fast, binary data format.&lt;/li&gt;
&lt;li&gt;A container file, to store persistent data.&lt;/li&gt;
&lt;li&gt;Remote procedure call (RPC).&lt;/li&gt;
&lt;li&gt;Simple integration with dynamic languages. Code generation is not required to read or write data files nor to use or implement RPC protocols. Code generation as an optional optimization, only worth implementing for statically typed languages.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;how-can-i-get-started-quickly-with-avro&#34;&gt;How can I get started quickly with Avro?&lt;/h2&gt;
&lt;p&gt;Check out the &lt;a href=&#34;https://github.com/phunt/avro-rpc-quickstart&#34;&gt;Quick Start Guide&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;how-do-i-statically-compile-a-schema-or-protocol-into-generated-code&#34;&gt;How do I statically compile a schema or protocol into generated code?&lt;/h2&gt;
&lt;h3 id=&#34;in-java&#34;&gt;In Java&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Add the avro jar, the jackson-mapper-asl.jar and jackson-core-asl.jar to your CLASSPATH.&lt;/li&gt;
&lt;li&gt;Run java org.apache.avro.specific.SpecificCompiler &lt;json file&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This appears to be out of date, the SpecificCompiler requires two arguments, presumably an input and and output file, but it isn&amp;rsquo;t clear that this does.&lt;/p&gt;
&lt;p&gt;Or use the Schema or Protocol Ant tasks. Avro&amp;rsquo;s build.xml provides examples of how these are used.&lt;/p&gt;
&lt;p&gt;Lastly, you can also use the &amp;ldquo;avro-tools&amp;rdquo; jar which ships with an Avro release. Just use the &amp;ldquo;compile (schema|protocol)&amp;rdquo; command.&lt;/p&gt;
&lt;h2 id=&#34;how-are-strings-represented-in-java&#34;&gt;How are Strings represented in Java?&lt;/h2&gt;
&lt;p&gt;They use &lt;a href=&#34;https://avro.apache.org/docs/current/api/java/org/apache/avro/util/Utf8.html&#34;&gt;org.apache.avro.util.Utf8&lt;/a&gt;, not java.lang.String.&lt;/p&gt;
&lt;h2 id=&#34;more-generally-how-do-avro-types-map-to-java-types&#34;&gt;More generally, how do Avro types map to Java types?&lt;/h2&gt;
&lt;p&gt;The mappings are documented in the package javadoc for &lt;a href=&#34;https://avro.apache.org/docs/1.7.6/gettingstartedjava.html#Defining+a+schema&#34;&gt;generic&lt;/a&gt;, &lt;a href=&#34;https://avro.apache.org/docs/current/api/java/org/apache/avro/specific/package-summary.html#package_description&#34;&gt;specific&lt;/a&gt; and &lt;a href=&#34;https://avro.apache.org/docs/current/api/java/org/apache/avro/reflect/package-summary.html#package_description&#34;&gt;reflect&lt;/a&gt; API.&lt;/p&gt;
&lt;h2 id=&#34;what-is-the-purpose-of-the-sync-marker-in-the-object-file-format&#34;&gt;What is the purpose of the sync marker in the object file format?&lt;/h2&gt;
&lt;p&gt;From Doug Cutting:&lt;/p&gt;
&lt;p&gt;HDFS splits files into blocks, and mapreduce runs a map task for each block. When the task starts, it needs to be able to seek into the file to the start of the block process through the block&amp;rsquo;s end. If the file were, e.g., a gzip file, this would not be possible, since gzip files must be decompressed from the start. One cannot seek into the middle of a gzip file and start decompressing. So Hadoop&amp;rsquo;s SequenceFile places a marker periodically (~64k) in the file at record and compression boundaries, where processing can be sensibly started. Then, when a map task starts processing an HDFS block, it finds the first marker after the block&amp;rsquo;s start and continues through the first marker in the next block of the file. This requires a bit of non-local access (~0.1%). Avro&amp;rsquo;s data file uses the same method as SequenceFile.&lt;/p&gt;
&lt;h2 id=&#34;why-isnt-every-value-in-avro-nullable&#34;&gt;Why isn&amp;rsquo;t every value in Avro nullable?&lt;/h2&gt;
&lt;p&gt;When serialized, if any value may be null then it must be noted that it
is non-null, adding at least a bit to the size of every value stored and
corresponding computational costs to create this bit on write and
interpret it on read. These costs are wasted when values may not in
fact be null, as is the case in many datasets. In Avro such costs are
only paid when values may actually be null.&lt;/p&gt;
&lt;p&gt;Also, allowing values to be null is a well-known source of errors. In
Avro, a value declared as non-null will always be non-null and programs
need not test for null values when processing it nor will they ever fail
for lack of such tests.&lt;/p&gt;
&lt;p&gt;Tony Hoare calls his invention of null references his &amp;ldquo;Billion Dollar
Mistake&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://qconlondon.com/london-2009/presentation/Null+References:+The+Billion+Dollar+Mistake&#34;&gt;http://qconlondon.com/london-2009/presentation/Null+References:+The+Billion+Dollar+Mistake&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Also note that in some programming languages not all values are permitted to be null. For example, in Java, values of type boolean, byte, short, char, int, float, long, and double may not be null.&lt;/p&gt;
&lt;h2 id=&#34;how-can-i-serialize-directly-tofrom-a-byte-array&#34;&gt;How can I serialize directly to/from a byte array?&lt;/h2&gt;
&lt;p&gt;As pointed out in the specification, Avro data should always be stored with its &lt;a href=&#34;https://avro.apache.org/docs/1.7.6/spec.html#Data+Serialization&#34;&gt;schema&lt;/a&gt;. The Avro provided classes &lt;a href=&#34;https://avro.apache.org/docs/1.7.6/api/java/org/apache/avro/file/DataFileWriter.html&#34;&gt;DataFileWriter&lt;/a&gt;, &lt;a href=&#34;https://avro.apache.org/docs/1.7.6/api/java/org/apache/avro/file/DataFileReader.html&#34;&gt;DataFileReader&lt;/a&gt;, and &lt;a href=&#34;https://avro.apache.org/docs/1.7.6/api/java/org/apache/avro/file/DataFileStream.html&#34;&gt;DataFileStream&lt;/a&gt; all ensure this by serializing the Schema in a container header. In some special cases, such as when implementing a new storage system or writing unit tests, you may need to write and read directly with the bare Avro serialized values. The following examples use &lt;a href=&#34;https://cwiki.apache.org/confluence/display/AVRO/FAQ#FAQ-InJava&#34;&gt;code generated for Java&lt;/a&gt; from an Avro Schema, specifically the &lt;a href=&#34;https://avro.apache.org/docs/1.7.6/gettingstartedjava.html#Defining+a+schema&#34;&gt;User example&lt;/a&gt; from the Quickstart guide.&lt;/p&gt;
&lt;h3 id=&#34;serializing-to-a-byte-array&#34;&gt;Serializing to a byte array&lt;/h3&gt;
&lt;p&gt;This example takes a User object and returns a newly allocated byte array with the Avro serialization of that user.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;ByteArrayOutputStream&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;out&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;ByteArrayOutputStream();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;BinaryEncoder&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;encoder&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;EncoderFactory.get().binaryEncoder(out,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;null&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;DatumWriter&amp;lt;User&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;writer&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;SpecificDatumWriter&amp;lt;User&amp;gt;(User.getClassSchema());&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;writer.write(user,&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;encoder);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;encoder.flush();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;out.close();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;byte&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[]&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;serializedBytes&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;out.toByteArray();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;deserializing-from-a-byte-array&#34;&gt;Deserializing from a byte array&lt;/h3&gt;
&lt;p&gt;This example takes a byte array containing the Avro serialization of a user and returns a User object.SpecificDatumReader&lt;User&gt; reader = new SpecificDatumReader&lt;User&gt;(User.getClassSchema());&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;Decoder&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;decoder&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;DecoderFactory.get().binaryDecoder(bytes,&lt;/span&gt; &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;null&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;User&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;user&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;reader.read(&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;null&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#a40000&#34;&gt;decoder);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: If you are serializing or deserializing in a loop or as a method, you should be reusing objects, readers and/or writers. Check the JavaDoc to see how to reuse the objects.&lt;/p&gt;

      </description>
    </item>
    
  </channel>
</rss>
