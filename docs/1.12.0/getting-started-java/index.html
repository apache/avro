<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=alternate type=text/html href=/docs/1.12.0/getting-started-java/_print/><link rel=alternate type=application/rss+xml href=/docs/1.12.0/getting-started-java/index.xml><meta name=robots content="index, follow"><link rel=apple-touch-icon sizes=57x57 href=https://apache.org/favicons/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=https://apache.org/favicons/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=https://apache.org/favicons/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=https://apache.org/favicons/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=https://apache.org/favicons/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=https://apache.org/favicons/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=https://apache.org/favicons/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=https://apache.org/favicons/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=https://apache.org/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png href=https://apache.org/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://apache.org/favicons/favicon-194x194.png sizes=194x194><link rel=icon type=image/png href=https://apache.org/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=https://apache.org/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=https://apache.org/favicons/favicon-16x16.png sizes=16x16><link rel=manifest href=https://apache.org/favicons/manifest.json><link rel="shortcut icon" href=https://apache.org/favicons/favicon.ico><title>Getting Started (Java) | Apache Avro</title>
<meta name=description content><meta property="og:url" content="/docs/1.12.0/getting-started-java/"><meta property="og:site_name" content="Apache Avro"><meta property="og:title" content="Getting Started (Java)"><meta property="og:description" content="This is a short guide for getting started with Apache Avro™ using Java. This guide only covers using Avro for data serialization; see Patrick Hunt’s Avro RPC Quick Start for a good introduction to using Avro for RPC.
Download Avro implementations for C, C++, C#, Java, PHP, Python, and Ruby can be downloaded from the Apache Avro™ Download page. This guide uses Avro 1.12.0, the latest version at the time of writing."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Getting Started (Java)"><meta itemprop=description content="This is a short guide for getting started with Apache Avro™ using Java. This guide only covers using Avro for data serialization; see Patrick Hunt’s Avro RPC Quick Start for a good introduction to using Avro for RPC.
Download Avro implementations for C, C++, C#, Java, PHP, Python, and Ruby can be downloaded from the Apache Avro™ Download page. This guide uses Avro 1.12.0, the latest version at the time of writing."><meta itemprop=dateModified content="2026-02-15T15:43:13+02:00"><meta itemprop=wordCount content="2286"><meta itemprop=keywords content="Java"><meta name=twitter:card content="summary"><meta name=twitter:title content="Getting Started (Java)"><meta name=twitter:description content="This is a short guide for getting started with Apache Avro™ using Java. This guide only covers using Avro for data serialization; see Patrick Hunt’s Avro RPC Quick Start for a good introduction to using Avro for RPC.
Download Avro implementations for C, C++, C#, Java, PHP, Python, and Ruby can be downloaded from the Apache Avro™ Download page. This guide uses Avro 1.12.0, the latest version at the time of writing."><link rel=preload href=/scss/main.min.cbf108fc68752c77d6b54d7783019a796735b379026275582fdbbb90ba6500b7.css as=style><link href=/scss/main.min.cbf108fc68752c77d6b54d7783019a796735b379026275582fdbbb90ba6500b7.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><link rel=stylesheet href=/css/prism.css></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><img src=/images/logo.svg width=35 height=30 style="margin:0 10px"></span><span class=font-weight-bold>Apache Avro</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/project/><span>Project</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><div class=dropdown><button class="nav-link btn btn-secondary dropdown-toggle" type=button id=navbarDropdown data-bs-toggle=dropdown aria-expanded=false>
Documentation</button><ul class=dropdown-menu><li><a class=dropdown-item href=https://avro.apache.org/docs/1.12.0/>1.12.0</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.11.4/>1.11.4</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.11.3/>1.11.3</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.11.2/>1.11.2</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.11.1/>1.11.1</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.11.0/>1.11.0</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.10.2/>1.10.2</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.10.1/>1.10.1</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.10.0/>1.10.0</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.9.2/>1.9.2</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.9.1/>1.9.1</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.9.0/>1.9.0</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.8.2/>1.8.2</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.8.1/>1.8.1</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.8.0/>1.8.0</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.7.7/>1.7.7</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.7.6/>1.7.6</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.7.5/>1.7.5</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.7.4/>1.7.4</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.7.3/>1.7.3</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.7.2/>1.7.2</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.7.1/>1.7.1</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.7.0/>1.7.0</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.6.3/>1.6.3</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.6.2/>1.6.2</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.6.1/>1.6.1</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.6.0/>1.6.0</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.5.4/>1.5.4</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.5.3/>1.5.3</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.5.2/>1.5.2</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.5.1/>1.5.1</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.5.0/>1.5.0</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.4.1/>1.4.1</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.4.0/>1.4.0</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.3.3/>1.3.3</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.3.2/>1.3.2</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.3.1/>1.3.1</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.3.0/>1.3.0</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.2.0/>1.2.0</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.1.0/>1.1.0</a></li><li><a class=dropdown-item href=https://avro.apache.org/docs/1.0.0/>1.0.0</a></li></ul></div></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><div class=dropdown><button class="nav-link btn btn-secondary dropdown-toggle" type=button id=navbarDropdown data-bs-toggle=dropdown aria-expanded=false>
ASF links</button><ul class=dropdown-menu><a class=dropdown-item href=http://www.apache.org/ target=_blank>ASF Web Site</a>
<a class=dropdown-item href=http://www.apache.org/licenses/ target=_blank>License</a>
<a class=dropdown-item href=http://www.apache.org/foundation/sponsorship.html target=_blank>Donate</a>
<a class=dropdown-item href=http://www.apache.org/foundation/thanks.html target=_blank>Thanks</a>
<a class=dropdown-item href=http://www.apache.org/security/ target=_blank>Security</a></ul></div></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="td-sidebar-nav collapse td-sidebar-nav--search-disabled foldable-nav" id=td-section-nav><div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false></a><ul class=dropdown-menu><li><a class=dropdown-item href=/params/></a></li></ul></div></div><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsversion-li><input type=checkbox id=m-docsversion-check>
<label for=m-docsversion-check><a href=/docs/++version++/ title="Apache Avro™ ++version++ Documentation" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsversion><span>++version++</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsversiongetting-started-java-li><input type=checkbox id=m-docsversiongetting-started-java-check>
<label for=m-docsversiongetting-started-java-check><a href=/docs/++version++/getting-started-java/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsversiongetting-started-java><span>Getting Started (Java)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsversiongetting-started-python-li><input type=checkbox id=m-docsversiongetting-started-python-check>
<label for=m-docsversiongetting-started-python-check><a href=/docs/++version++/getting-started-python/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsversiongetting-started-python><span>Getting Started (Python)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsversionspecification-li><input type=checkbox id=m-docsversionspecification-check>
<label for=m-docsversionspecification-check><a href=/docs/++version++/specification/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsversionspecification><span>Specification</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsversionapi-java-li><input type=checkbox id=m-docsversionapi-java-check>
<label for=m-docsversionapi-java-check><a href=/docs/++version++/api/java/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsversionapi-java><span>Java API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsversionapi-c-li><input type=checkbox id=m-docsversionapi-c-check>
<label for=m-docsversionapi-c-check><a href=/docs/++version++/api/c/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsversionapi-c><span>C API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsversionapi-c-li><input type=checkbox id=m-docsversionapi-c-check>
<label for=m-docsversionapi-c-check><a href=/docs/++version++/api/cpp/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsversionapi-c><span>C++ API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsversionapi-csharp-li><input type=checkbox id=m-docsversionapi-csharp-check>
<label for=m-docsversionapi-csharp-check><a href=/docs/++version++/api/csharp/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsversionapi-csharp><span>C# API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsversionapi-py-li><input type=checkbox id=m-docsversionapi-py-check>
<label for=m-docsversionapi-py-check><a href=/docs/++version++/api/py/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsversionapi-py><span>Python API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsversionapi-rust-li><input type=checkbox id=m-docsversionapi-rust-check>
<label for=m-docsversionapi-rust-check><a href=/docs/++version++/api/rust/apache_avro/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsversionapi-rust><span>Rust API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsversionmapreduce-guide-li><input type=checkbox id=m-docsversionmapreduce-guide-check>
<label for=m-docsversionmapreduce-guide-check><a href=/docs/++version++/mapreduce-guide/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsversionmapreduce-guide><span>MapReduce guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsversionidl-language-li><input type=checkbox id=m-docsversionidl-language-check>
<label for=m-docsversionidl-language-check><a href=/docs/++version++/idl-language/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsversionidl-language><span>IDL Language</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsversionsasl-profile-li><input type=checkbox id=m-docsversionsasl-profile-check>
<label for=m-docsversionsasl-profile-check><a href=/docs/++version++/sasl-profile/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsversionsasl-profile><span>SASL profile</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsversioneditor-support-li><input type=checkbox id=m-docsversioneditor-support-check>
<label for=m-docsversioneditor-support-check><a href=/docs/++version++/editor-support/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsversioneditor-support><span>Editor Support</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs1120-li><input type=checkbox id=m-docs1120-check checked>
<label for=m-docs1120-check><a href=/docs/1.12.0/ title="Apache Avro™ 1.12.0 Documentation" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1120><span>1.12.0</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docs1120getting-started-java-li><input type=checkbox id=m-docs1120getting-started-java-check checked>
<label for=m-docs1120getting-started-java-check><a href=/docs/1.12.0/getting-started-java/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__section" id=m-docs1120getting-started-java><span class=td-sidebar-nav-active-item>Getting Started (Java)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1120getting-started-python-li><input type=checkbox id=m-docs1120getting-started-python-check>
<label for=m-docs1120getting-started-python-check><a href=/docs/1.12.0/getting-started-python/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1120getting-started-python><span>Getting Started (Python)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1120specification-li><input type=checkbox id=m-docs1120specification-check>
<label for=m-docs1120specification-check><a href=/docs/1.12.0/specification/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1120specification><span>Specification</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1120api-java-li><input type=checkbox id=m-docs1120api-java-check>
<label for=m-docs1120api-java-check><a href=/docs/1.12.0/api/java/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1120api-java><span>Java API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1120api-c-li><input type=checkbox id=m-docs1120api-c-check>
<label for=m-docs1120api-c-check><a href=/docs/1.12.0/api/c/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1120api-c><span>C API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1120api-c-li><input type=checkbox id=m-docs1120api-c-check>
<label for=m-docs1120api-c-check><a href=/docs/1.12.0/api/cpp/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1120api-c><span>C++ API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1120api-csharp-li><input type=checkbox id=m-docs1120api-csharp-check>
<label for=m-docs1120api-csharp-check><a href=/docs/1.12.0/api/csharp/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1120api-csharp><span>C# API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1120api-py-li><input type=checkbox id=m-docs1120api-py-check>
<label for=m-docs1120api-py-check><a href=/docs/1.12.0/api/py/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1120api-py><span>Python API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1120mapreduce-guide-li><input type=checkbox id=m-docs1120mapreduce-guide-check>
<label for=m-docs1120mapreduce-guide-check><a href=/docs/1.12.0/mapreduce-guide/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1120mapreduce-guide><span>MapReduce guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1120idl-language-li><input type=checkbox id=m-docs1120idl-language-check>
<label for=m-docs1120idl-language-check><a href=/docs/1.12.0/idl-language/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1120idl-language><span>IDL Language</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1120sasl-profile-li><input type=checkbox id=m-docs1120sasl-profile-check>
<label for=m-docs1120sasl-profile-check><a href=/docs/1.12.0/sasl-profile/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1120sasl-profile><span>SASL profile</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1120trevni-li><input type=checkbox id=m-docs1120trevni-check>
<label for=m-docs1120trevni-check><a href=/docs/1.12.0/trevni/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1120trevni><span></span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docs1114-li><input type=checkbox id=m-docs1114-check>
<label for=m-docs1114-check><a href=/docs/1.11.4/ title="Apache Avro™ 1.11.4 Documentation" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1114><span>1.11.4</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1114getting-started-java-li><input type=checkbox id=m-docs1114getting-started-java-check>
<label for=m-docs1114getting-started-java-check><a href=/docs/1.11.4/getting-started-java/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1114getting-started-java><span>Getting Started (Java)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1114getting-started-python-li><input type=checkbox id=m-docs1114getting-started-python-check>
<label for=m-docs1114getting-started-python-check><a href=/docs/1.11.4/getting-started-python/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1114getting-started-python><span>Getting Started (Python)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1114specification-li><input type=checkbox id=m-docs1114specification-check>
<label for=m-docs1114specification-check><a href=/docs/1.11.4/specification/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1114specification><span>Specification</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1114api-java-li><input type=checkbox id=m-docs1114api-java-check>
<label for=m-docs1114api-java-check><a href=/docs/1.11.4/api/java/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1114api-java><span>Java API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1114api-c-li><input type=checkbox id=m-docs1114api-c-check>
<label for=m-docs1114api-c-check><a href=/docs/1.11.4/api/c/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1114api-c><span>C API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1114api-c-li><input type=checkbox id=m-docs1114api-c-check>
<label for=m-docs1114api-c-check><a href=/docs/1.11.4/api/cpp/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1114api-c><span>C++ API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1114api-csharp-li><input type=checkbox id=m-docs1114api-csharp-check>
<label for=m-docs1114api-csharp-check><a href=/docs/1.11.4/api/csharp/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1114api-csharp><span>C# API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1114api-py-li><input type=checkbox id=m-docs1114api-py-check>
<label for=m-docs1114api-py-check><a href=/docs/1.11.4/api/py/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1114api-py><span>Python API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1114mapreduce-guide-li><input type=checkbox id=m-docs1114mapreduce-guide-check>
<label for=m-docs1114mapreduce-guide-check><a href=/docs/1.11.4/mapreduce-guide/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1114mapreduce-guide><span>MapReduce guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1114idl-language-li><input type=checkbox id=m-docs1114idl-language-check>
<label for=m-docs1114idl-language-check><a href=/docs/1.11.4/idl-language/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1114idl-language><span>IDL Language</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1114sasl-profile-li><input type=checkbox id=m-docs1114sasl-profile-check>
<label for=m-docs1114sasl-profile-check><a href=/docs/1.11.4/sasl-profile/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1114sasl-profile><span>SASL profile</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docs1113-li><input type=checkbox id=m-docs1113-check>
<label for=m-docs1113-check><a href=/docs/1.11.3/ title="Apache Avro™ 1.11.3 Documentation" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1113><span>1.11.3</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1113getting-started-java-li><input type=checkbox id=m-docs1113getting-started-java-check>
<label for=m-docs1113getting-started-java-check><a href=/docs/1.11.3/getting-started-java/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1113getting-started-java><span>Getting Started (Java)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1113getting-started-python-li><input type=checkbox id=m-docs1113getting-started-python-check>
<label for=m-docs1113getting-started-python-check><a href=/docs/1.11.3/getting-started-python/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1113getting-started-python><span>Getting Started (Python)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1113specification-li><input type=checkbox id=m-docs1113specification-check>
<label for=m-docs1113specification-check><a href=/docs/1.11.3/specification/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1113specification><span>Specification</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1113api-java-li><input type=checkbox id=m-docs1113api-java-check>
<label for=m-docs1113api-java-check><a href=/docs/1.11.3/api/java/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1113api-java><span>Java API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1113api-c-li><input type=checkbox id=m-docs1113api-c-check>
<label for=m-docs1113api-c-check><a href=/docs/1.11.3/api/c/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1113api-c><span>C API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1113api-c-li><input type=checkbox id=m-docs1113api-c-check>
<label for=m-docs1113api-c-check><a href=/docs/1.11.3/api/cpp/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1113api-c><span>C++ API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1113api-csharp-li><input type=checkbox id=m-docs1113api-csharp-check>
<label for=m-docs1113api-csharp-check><a href=/docs/1.11.3/api/csharp/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1113api-csharp><span>C# API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1113api-py-li><input type=checkbox id=m-docs1113api-py-check>
<label for=m-docs1113api-py-check><a href=/docs/1.11.3/api/py/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1113api-py><span>Python API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1113mapreduce-guide-li><input type=checkbox id=m-docs1113mapreduce-guide-check>
<label for=m-docs1113mapreduce-guide-check><a href=/docs/1.11.3/mapreduce-guide/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1113mapreduce-guide><span>MapReduce guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1113idl-language-li><input type=checkbox id=m-docs1113idl-language-check>
<label for=m-docs1113idl-language-check><a href=/docs/1.11.3/idl-language/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1113idl-language><span>IDL Language</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1113sasl-profile-li><input type=checkbox id=m-docs1113sasl-profile-check>
<label for=m-docs1113sasl-profile-check><a href=/docs/1.11.3/sasl-profile/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1113sasl-profile><span>SASL profile</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docs1112-li><input type=checkbox id=m-docs1112-check>
<label for=m-docs1112-check><a href=/docs/1.11.2/ title="Apache Avro™ 1.11.2 Documentation" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1112><span>1.11.2</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1112getting-started-java-li><input type=checkbox id=m-docs1112getting-started-java-check>
<label for=m-docs1112getting-started-java-check><a href=/docs/1.11.2/getting-started-java/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1112getting-started-java><span>Getting Started (Java)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1112getting-started-python-li><input type=checkbox id=m-docs1112getting-started-python-check>
<label for=m-docs1112getting-started-python-check><a href=/docs/1.11.2/getting-started-python/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1112getting-started-python><span>Getting Started (Python)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1112specification-li><input type=checkbox id=m-docs1112specification-check>
<label for=m-docs1112specification-check><a href=/docs/1.11.2/specification/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1112specification><span>Specification</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1112api-java-li><input type=checkbox id=m-docs1112api-java-check>
<label for=m-docs1112api-java-check><a href=/docs/1.11.2/api/java/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1112api-java><span>Java API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1112api-c-li><input type=checkbox id=m-docs1112api-c-check>
<label for=m-docs1112api-c-check><a href=/docs/1.11.2/api/c/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1112api-c><span>C API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1112api-c-li><input type=checkbox id=m-docs1112api-c-check>
<label for=m-docs1112api-c-check><a href=/docs/1.11.2/api/cpp/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1112api-c><span>C++ API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1112api-csharp-li><input type=checkbox id=m-docs1112api-csharp-check>
<label for=m-docs1112api-csharp-check><a href=/docs/1.11.2/api/csharp/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1112api-csharp><span>C# API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1112mapreduce-guide-li><input type=checkbox id=m-docs1112mapreduce-guide-check>
<label for=m-docs1112mapreduce-guide-check><a href=/docs/1.11.2/mapreduce-guide/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1112mapreduce-guide><span>MapReduce guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1112idl-language-li><input type=checkbox id=m-docs1112idl-language-check>
<label for=m-docs1112idl-language-check><a href=/docs/1.11.2/idl-language/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1112idl-language><span>IDL Language</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1112sasl-profile-li><input type=checkbox id=m-docs1112sasl-profile-check>
<label for=m-docs1112sasl-profile-check><a href=/docs/1.11.2/sasl-profile/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1112sasl-profile><span>SASL profile</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docs1111-li><input type=checkbox id=m-docs1111-check>
<label for=m-docs1111-check><a href=/docs/1.11.1/ title="Apache Avro™ 1.11.1 Documentation" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1111><span>1.11.1</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1111getting-started-java-li><input type=checkbox id=m-docs1111getting-started-java-check>
<label for=m-docs1111getting-started-java-check><a href=/docs/1.11.1/getting-started-java/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1111getting-started-java><span>Getting Started (Java)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1111getting-started-python-li><input type=checkbox id=m-docs1111getting-started-python-check>
<label for=m-docs1111getting-started-python-check><a href=/docs/1.11.1/getting-started-python/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1111getting-started-python><span>Getting Started (Python)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1111specification-li><input type=checkbox id=m-docs1111specification-check>
<label for=m-docs1111specification-check><a href=/docs/1.11.1/specification/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1111specification><span>Specification</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1111api-java-li><input type=checkbox id=m-docs1111api-java-check>
<label for=m-docs1111api-java-check><a href=/docs/1.11.1/api/java/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1111api-java><span>Java API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1111api-c-li><input type=checkbox id=m-docs1111api-c-check>
<label for=m-docs1111api-c-check><a href=/docs/1.11.1/api/c/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1111api-c><span>C API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1111api-c-li><input type=checkbox id=m-docs1111api-c-check>
<label for=m-docs1111api-c-check><a href=/docs/1.11.1/api/cpp/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1111api-c><span>C++ API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1111api-csharp-li><input type=checkbox id=m-docs1111api-csharp-check>
<label for=m-docs1111api-csharp-check><a href=/docs/1.11.1/api/csharp/html/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docs1111api-csharp><span>C# API</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1111mapreduce-guide-li><input type=checkbox id=m-docs1111mapreduce-guide-check>
<label for=m-docs1111mapreduce-guide-check><a href=/docs/1.11.1/mapreduce-guide/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1111mapreduce-guide><span>MapReduce guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1111idl-language-li><input type=checkbox id=m-docs1111idl-language-check>
<label for=m-docs1111idl-language-check><a href=/docs/1.11.1/idl-language/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1111idl-language><span>IDL Language</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docs1111sasl-profile-li><input type=checkbox id=m-docs1111sasl-profile-check>
<label for=m-docs1111sasl-profile-check><a href=/docs/1.11.1/sasl-profile/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docs1111sasl-profile><span>SASL profile</span></a></label></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"><a href=https://github.com/apache/avro/tree/main/doc/content/en/docs/1.12.0/Getting%20started%20%28Java%29/_index.md class="td-page-meta--view td-page-meta__view" target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/apache/avro/edit/main/doc/content/en/docs/1.12.0/Getting%20started%20%28Java%29/_index.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/apache/avro/new/main/doc/content/en/docs/1.12.0/Getting%20started%20%28Java%29?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/apache/avro/issues/new?title=Getting%20Started%20%28Java%29" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/apache/avro/issues/new class="td-page-meta--project td-page-meta__project-issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
<a id=print href=/docs/1.12.0/getting-started-java/_print/><i class="fa-solid fa-print fa-fw"></i> Print entire section</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#download>Download</a></li><li><a href=#defining-a-schema>Defining a schema</a></li><li><a href=#serializing-and-deserializing-with-code-generation>Serializing and deserializing with code generation</a><ul><li><a href=#compiling-the-schema>Compiling the schema</a></li><li><a href=#creating-users>Creating Users</a></li><li><a href=#serializing>Serializing</a></li><li><a href=#deserializing>Deserializing</a></li><li><a href=#compiling-and-running-the-example-code>Compiling and running the example code</a></li><li><a href=#beta-feature-generating-faster-code>Beta feature: Generating faster code</a></li></ul></li><li><a href=#serializing-and-deserializing-without-code-generation>Serializing and deserializing without code generation</a><ul><li><a href=#creating-users-1>Creating users</a></li><li><a href=#serializing-1>Serializing</a></li><li><a href=#deserializing-1>Deserializing</a></li><li><a href=#compiling-and-running-the-example-code-1>Compiling and running the example code</a></li></ul></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud taxo-tags"><h5 class=taxonomy-title>Tag Cloud</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=/tags/java/ data-taxonomy-term=java><span class=taxonomy-label>Java</span><span class=taxonomy-count>6</span></a></li><li><a class=taxonomy-term href=/tags/python/ data-taxonomy-term=python><span class=taxonomy-label>Python</span><span class=taxonomy-count>6</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Documentation</a></li><li class=breadcrumb-item><a href=/docs/1.12.0/>1.12.0</a></li><li class="breadcrumb-item active" aria-current=page>Getting Started (Java)</li></ol></nav><div class=td-content><h1>Getting Started (Java)</h1><header class=article-meta><div class="taxonomy taxonomy-terms-article taxo-tags"><h5 class=taxonomy-title>Tags:</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=/tags/java/ data-taxonomy-term=java><span class=taxonomy-label>Java</span></a></li></ul></div><p class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>&nbsp; 11 minute read &nbsp;</p></header><p>This is a short guide for getting started with Apache Avro™ using Java. This guide only covers using Avro for data serialization; see Patrick Hunt&rsquo;s <a href=https://github.com/phunt/avro-rpc-quickstart>Avro RPC Quick Start</a> for a good introduction to using Avro for RPC.</p><h2 id=download>Download</h2><p>Avro implementations for C, C++, C#, Java, PHP, Python, and Ruby can be downloaded from the <a href=/project/download/>Apache Avro™ Download</a> page. This guide uses Avro 1.12.0, the latest version at the time of writing. For the examples in this guide, download avro-1.12.0.jar and avro-tools-1.12.0.jar.</p><p>Alternatively, if you are using Maven, add the following dependency to your POM:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;groupId&gt;</span>org.apache.avro<span style=color:#204a87;font-weight:700>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;artifactId&gt;</span>avro<span style=color:#204a87;font-weight:700>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;version&gt;</span>1.12.0<span style=color:#204a87;font-weight:700>&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/dependency&gt;</span>
</span></span></code></pre></div><p>As well as the Avro Maven plugin (for performing code generation):</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;groupId&gt;</span>org.apache.avro<span style=color:#204a87;font-weight:700>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;artifactId&gt;</span>avro-maven-plugin<span style=color:#204a87;font-weight:700>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;version&gt;</span>1.12.0<span style=color:#204a87;font-weight:700>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;sourceDirectory&gt;</span>${project.basedir}/src/main/avro/<span style=color:#204a87;font-weight:700>&lt;/sourceDirectory&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;outputDirectory&gt;</span>${project.basedir}/src/main/java/<span style=color:#204a87;font-weight:700>&lt;/outputDirectory&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;executions&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;execution&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&lt;phase&gt;</span>generate-sources<span style=color:#204a87;font-weight:700>&lt;/phase&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&lt;goals&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&lt;goal&gt;</span>schema<span style=color:#204a87;font-weight:700>&lt;/goal&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&lt;/goals&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;/execution&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;/executions&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/plugin&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;groupId&gt;</span>org.apache.maven.plugins<span style=color:#204a87;font-weight:700>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;artifactId&gt;</span>maven-compiler-plugin<span style=color:#204a87;font-weight:700>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;source&gt;</span>1.8<span style=color:#204a87;font-weight:700>&lt;/source&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&lt;target&gt;</span>1.8<span style=color:#204a87;font-weight:700>&lt;/target&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&lt;/plugin&gt;</span>
</span></span></code></pre></div><p>You may also build the required Avro jars from source. Building Avro is beyond the scope of this guide; see the Build Documentation page in the wiki for more information.</p><h2 id=defining-a-schema>Defining a schema</h2><p>Avro schemas are defined using JSON or IDL (the latter requires an extra dependency). Schemas are composed of primitive types (null, boolean, int, long, float, double, bytes, and string) and complex types (record, enum, array, map, union, and fixed). You can learn more about Avro schemas and types from the specification, but for now let&rsquo;s start with a simple schema example, user.avsc:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span><span style=color:#204a87;font-weight:700>&#34;namespace&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;example.avro&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span> <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;record&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span> <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;User&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span> <span style=color:#204a87;font-weight:700>&#34;fields&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>{</span><span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;string&#34;</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>{</span><span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;favorite_number&#34;</span><span style=color:#000;font-weight:700>,</span>  <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;int&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;null&#34;</span><span style=color:#000;font-weight:700>]},</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>{</span><span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;favorite_color&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;string&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;null&#34;</span><span style=color:#000;font-weight:700>]}</span>
</span></span><span style=display:flex><span> <span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>This schema defines a record representing a hypothetical user. (Note that a schema file can only contain a single schema definition.) At minimum, a record definition must include its type (&ldquo;type&rdquo;: &ldquo;record&rdquo;), a name (&ldquo;name&rdquo;: &ldquo;User&rdquo;), and fields, in this case name, favorite_number, and favorite_color. We also define a namespace (&ldquo;namespace&rdquo;: &ldquo;example.avro&rdquo;), which together with the name attribute defines the &ldquo;full name&rdquo; of the schema (example.avro.User in this case).</p><p>Fields are defined via an array of objects, each of which defines a name and type (other attributes are optional, see the record specification for more details). The type attribute of a field is another schema object, which can be either a primitive or complex type. For example, the name field of our User schema is the primitive type string, whereas the favorite_number and favorite_color fields are both unions, represented by JSON arrays. unions are a complex type that can be any of the types listed in the array; e.g., favorite_number can either be an int or null, essentially making it an optional field.</p><h2 id=serializing-and-deserializing-with-code-generation>Serializing and deserializing with code generation</h2><h3 id=compiling-the-schema>Compiling the schema</h3><p>Code generation allows us to automatically create classes based on our previously-defined schema. Once we have defined the relevant classes, there is no need to use the schema directly in our programs. We use the avro-tools jar to generate code as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar /path/to/avro-tools-1.12.0.jar compile schema &lt;schema file&gt; &lt;destination&gt;
</span></span></code></pre></div><p>This will generate the appropriate source files in a package based on the schema&rsquo;s namespace in the provided destination folder. For instance, to generate a User class in package example.avro from the schema defined above, run</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar /path/to/avro-tools-1.12.0.jar compile schema user.avsc .
</span></span></code></pre></div><p>Note that if you using the Avro Maven plugin, there is no need to manually invoke the schema compiler; the plugin automatically performs code generation on any .avsc files present in the configured source directory.</p><h3 id=creating-users>Creating Users</h3><p>Now that we&rsquo;ve completed the code generation, let&rsquo;s create some Users, serialize them to a data file on disk, and then read back the file and deserialize the User objects.</p><p>First let&rsquo;s create some Users and set their fields.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>User</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>user1</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>User</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>user1</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>setName</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Alyssa&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>user1</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>setFavoriteNumber</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>256</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>// Leave favorite color null</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>// Alternate constructor</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>User</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>user2</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>User</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Ben&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>7</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;red&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>// Construct via builder</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>User</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>user3</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>User</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>newBuilder</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>             </span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>setName</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Charlie&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>             </span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>setFavoriteColor</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;blue&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>             </span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>setFavoriteNumber</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>             </span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>build</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>As shown in this example, Avro objects can be created either by invoking a constructor directly or by using a builder. Unlike constructors, builders will automatically set any default values specified in the schema. Additionally, builders validate the data as it set, whereas objects constructed directly will not cause an error until the object is serialized. However, using constructors directly generally offers better performance, as builders create a copy of the datastructure before it is written.</p><p>Note that we do not set user1&rsquo;s favorite color. Since that record is of type [&ldquo;string&rdquo;, &ldquo;null&rdquo;], we can either set it to a string or leave it null; it is essentially optional. Similarly, we set user3&rsquo;s favorite number to null (using a builder requires setting all fields, even if they are null).</p><h3 id=serializing>Serializing</h3><p>Now let&rsquo;s serialize our Users to disk.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Serialize user1, user2 and user3 to disk</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>DatumWriter</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>User</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>userDatumWriter</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>SpecificDatumWriter</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>User</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>User</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>class</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>DataFileWriter</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>User</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>dataFileWriter</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>DataFileWriter</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>User</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>userDatumWriter</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>dataFileWriter</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>create</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>user1</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>getSchema</span><span style=color:#000;font-weight:700>(),</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>File</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;users.avro&#34;</span><span style=color:#000;font-weight:700>));</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>dataFileWriter</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>user1</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>dataFileWriter</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>user2</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>dataFileWriter</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>user3</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>dataFileWriter</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>close</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>We create a DatumWriter, which converts Java objects into an in-memory serialized format. The SpecificDatumWriter class is used with generated classes and extracts the schema from the specified generated type.</p><p>Next we create a DataFileWriter, which writes the serialized records, as well as the schema, to the file specified in the dataFileWriter.create call. We write our users to the file via calls to the dataFileWriter.append method. When we are done writing, we close the data file.</p><h3 id=deserializing>Deserializing</h3><p>Finally, let&rsquo;s deserialize the data file we just created.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Deserialize Users from disk</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>DatumReader</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>User</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>userDatumReader</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>SpecificDatumReader</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>User</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>User</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>class</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>DataFileReader</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>User</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>dataFileReader</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>DataFileReader</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>User</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>file</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>userDatumReader</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>User</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>user</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>while</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>dataFileReader</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>hasNext</span><span style=color:#000;font-weight:700>())</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>// Reuse user object by passing it to next(). This saves us from</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>// allocating and garbage collecting many objects for files with</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>// many items.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>user</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>dataFileReader</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>next</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>user</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>System</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>out</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>println</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>user</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>This snippet will output:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span><span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Alyssa&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>&#34;favorite_number&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>256</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>&#34;favorite_color&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{</span><span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Ben&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>&#34;favorite_number&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>&#34;favorite_color&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;red&#34;</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{</span><span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Charlie&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>&#34;favorite_number&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>&#34;favorite_color&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;blue&#34;</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Deserializing is very similar to serializing. We create a SpecificDatumReader, analogous to the SpecificDatumWriter we used in serialization, which converts in-memory serialized items into instances of our generated class, in this case User. We pass the DatumReader and the previously created File to a DataFileReader, analogous to the DataFileWriter, which reads both the schema used by the writer as well as the data from the file on disk. The data will be read using the writer&rsquo;s schema included in the file and the schema provided by the reader, in this case the User class. The writer&rsquo;s schema is needed to know the order in which fields were written, while the reader&rsquo;s schema is needed to know what fields are expected and how to fill in default values for fields added since the file was written. If there are differences between the two schemas, they are resolved according to the Schema Resolution specification.</p><p>Next we use the DataFileReader to iterate through the serialized Users and print the deserialized object to stdout. Note how we perform the iteration: we create a single User object which we store the current deserialized user in, and pass this record object to every call of dataFileReader.next. This is a performance optimization that allows the DataFileReader to reuse the same User object rather than allocating a new User for every iteration, which can be very expensive in terms of object allocation and garbage collection if we deserialize a large data file. While this technique is the standard way to iterate through a data file, it&rsquo;s also possible to use for (User user : dataFileReader) if performance is not a concern.</p><h3 id=compiling-and-running-the-example-code>Compiling and running the example code</h3><p>This example code is included as a Maven project in the examples/java-example directory in the Avro docs. From this directory, execute the following commands to build and run the example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ mvn compile <span style=color:#8f5902;font-style:italic># includes code generation via Avro Maven plugin</span>
</span></span><span style=display:flex><span>$ mvn -q exec:java -Dexec.mainClass<span style=color:#ce5c00;font-weight:700>=</span>example.SpecificMain
</span></span></code></pre></div><h3 id=beta-feature-generating-faster-code>Beta feature: Generating faster code</h3><p>In release 1.9.0, we introduced a new approach to generating code that speeds up decoding of objects by more than 10% and encoding by more than 30% (future performance enhancements are underway). To ensure a smooth introduction of this change into production systems, this feature is controlled by a feature flag, the system property org.apache.avro.specific.use_custom_coders. In this first release, this feature is off by default. To turn it on, set the system flag to true at runtime. In the sample above, for example, you could enable the fater coders as follows:</p><p>$ mvn -q exec:java -Dexec.mainClass=example.SpecificMain<br>-Dorg.apache.avro.specific.use_custom_coders=true</p><p>Note that you do not have to recompile your Avro schema to have access to this feature. The feature is compiled and built into your code, and you turn it on and off at runtime using the feature flag. As a result, you can turn it on during testing, for example, and then off in production. Or you can turn it on in production, and quickly turn it off if something breaks.</p><p>We encourage the Avro community to exercise this new feature early to help build confidence. (For those paying on demand for compute resources in the cloud, it can lead to meaningful cost savings.) As confidence builds, we will turn this feature on by default, and eventually eliminate the feature flag (and the old code).</p><h2 id=serializing-and-deserializing-without-code-generation>Serializing and deserializing without code generation</h2><p>Data in Avro is always stored with its corresponding schema, meaning we can always read a serialized item regardless of whether we know the schema ahead of time. This allows us to perform serialization and deserialization without code generation.</p><p>Let&rsquo;s go over the same example as in the previous section, but without using code generation: we&rsquo;ll create some users, serialize them to a data file on disk, and then read back the file and deserialize the users objects.</p><h3 id=creating-users-1>Creating users</h3><p>First, we use a SchemaParser to read our schema definition and create a Schema object.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>Schema</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>schema</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>SchemaParser</span><span style=color:#000;font-weight:700>().</span><span style=color:#c4a000>parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>File</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;user.avsc&#34;</span><span style=color:#000;font-weight:700>)).</span><span style=color:#c4a000>mainSchema</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Using this schema, let&rsquo;s create some users.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>GenericRecord</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>user1</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>GenericData</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>Record</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>schema</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>user1</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>put</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;Alyssa&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>user1</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>put</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;favorite_number&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>256</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>// Leave favorite color null</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>GenericRecord</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>user2</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>GenericData</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>Record</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>schema</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>user2</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>put</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;Ben&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>user2</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>put</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;favorite_number&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>7</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>user2</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>put</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;favorite_color&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;red&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Since we&rsquo;re not using code generation, we use GenericRecords to represent users. GenericRecord uses the schema to verify that we only specify valid fields. If we try to set a non-existent field (e.g., user1.put(&ldquo;favorite_animal&rdquo;, &ldquo;cat&rdquo;)), we&rsquo;ll get an AvroRuntimeException when we run the program.</p><p>Note that we do not set user1&rsquo;s favorite color. Since that record is of type [&ldquo;string&rdquo;, &ldquo;null&rdquo;], we can either set it to a string or leave it null; it is essentially optional.</p><h3 id=serializing-1>Serializing</h3><p>Now that we&rsquo;ve created our user objects, serializing and deserializing them is almost identical to the example above which uses code generation. The main difference is that we use generic instead of specific readers and writers.</p><p>First we&rsquo;ll serialize our users to a data file on disk.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Serialize user1 and user2 to disk</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>File</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>file</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>File</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;users.avro&#34;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>DatumWriter</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>GenericRecord</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>datumWriter</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>GenericDatumWriter</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>GenericRecord</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>schema</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>DataFileWriter</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>GenericRecord</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>dataFileWriter</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>DataFileWriter</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>GenericRecord</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>datumWriter</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>dataFileWriter</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>create</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>schema</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>file</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>dataFileWriter</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>user1</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>dataFileWriter</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>user2</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>dataFileWriter</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>close</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>We create a DatumWriter, which converts Java objects into an in-memory serialized format. Since we are not using code generation, we create a GenericDatumWriter. It requires the schema both to determine how to write the GenericRecords and to verify that all non-nullable fields are present.</p><p>As in the code generation example, we also create a DataFileWriter, which writes the serialized records, as well as the schema, to the file specified in the dataFileWriter.create call. We write our users to the file via calls to the dataFileWriter.append method. When we are done writing, we close the data file.</p><h3 id=deserializing-1>Deserializing</h3><p>Finally, we&rsquo;ll deserialize the data file we just created.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Deserialize users from disk</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>DatumReader</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>GenericRecord</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>datumReader</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>GenericDatumReader</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>GenericRecord</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>schema</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>DataFileReader</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>GenericRecord</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>dataFileReader</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>new</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>DataFileReader</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>GenericRecord</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>file</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>datumReader</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>GenericRecord</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>user</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>while</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>dataFileReader</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>hasNext</span><span style=color:#000;font-weight:700>())</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>// Reuse user object by passing it to next(). This saves us from</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>// allocating and garbage collecting many objects for files with</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>// many items.</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>user</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>dataFileReader</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>next</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>user</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>System</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>out</span><span style=color:#000;font-weight:700>.</span><span style=color:#c4a000>println</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>user</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>This outputs:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span><span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Alyssa&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>&#34;favorite_number&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>256</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>&#34;favorite_color&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{</span><span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Ben&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>&#34;favorite_number&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>&#34;favorite_color&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;red&#34;</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Deserializing is very similar to serializing. We create a GenericDatumReader, analogous to the GenericDatumWriter we used in serialization, which converts in-memory serialized items into GenericRecords. We pass the DatumReader and the previously created File to a DataFileReader, analogous to the DataFileWriter, which reads both the schema used by the writer as well as the data from the file on disk. The data will be read using the writer&rsquo;s schema included in the file, and the reader&rsquo;s schema provided to the GenericDatumReader. The writer&rsquo;s schema is needed to know the order in which fields were written, while the reader&rsquo;s schema is needed to know what fields are expected and how to fill in default values for fields added since the file was written. If there are differences between the two schemas, they are resolved according to the Schema Resolution specification.</p><p>Next, we use the DataFileReader to iterate through the serialized users and print the deserialized object to stdout. Note how we perform the iteration: we create a single GenericRecord object which we store the current deserialized user in, and pass this record object to every call of dataFileReader.next. This is a performance optimization that allows the DataFileReader to reuse the same record object rather than allocating a new GenericRecord for every iteration, which can be very expensive in terms of object allocation and garbage collection if we deserialize a large data file. While this technique is the standard way to iterate through a data file, it&rsquo;s also possible to use for (GenericRecord user : dataFileReader) if performance is not a concern.</p><h3 id=compiling-and-running-the-example-code-1>Compiling and running the example code</h3><p>This example code is included as a Maven project in the examples/java-example directory in the Avro docs. From this directory, execute the following commands to build and run the example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ mvn compile
</span></span><span style=display:flex><span>$ mvn -q exec:java -Dexec.mainClass<span style=color:#ce5c00;font-weight:700>=</span>example.GenericMain
</span></span></code></pre></div><div class=section-index></div><div class=td-page-meta__lastmod>Last modified February 15, 2026: <a href=https://github.com/apache/avro/commit/7d35ede156c47e937402c4be5c66af080fb94d32>Bump org.apache.avro:avro in /doc/examples/java-example (#3649) (7d35ede)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-4 col-sm-3 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank rel=noopener href=https://lists.apache.org/list.html?user@avro.apache.org aria-label="User mailing list"><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/ApacheAvro aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/avro aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-4 col-sm-3 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/apache/avro aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Issues aria-label=Issues><a class=text-white target=_blank rel=noopener href=https://issues.apache.org/jira/projects/AVRO/issues aria-label=Issues><i class="fab fa-jira"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Chat with other project developers at Slack" aria-label="Chat with other project developers at Slack"><a class=text-white target=_blank rel=noopener href=https://the-asf.slack.com/ aria-label="Chat with other project developers at Slack"><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://lists.apache.org/list.html?dev@avro.apache.org aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-10 col-sm-3 text-center py-2 order-sm-2"><a href=https://www.apache.org/><small class=text-white>&copy; 2026 The Apache Software Foundation </small></a><small class=text-white>All Rights Reserved</small><p><small class=text-white>Apache Avro, Avro&trade;, Apache&reg;, and the Apache feather logo are either registered trademarks or trademarks of The Apache Software Foundation.</small></p></div><div class="col-5 col-sm-3 order-sm-2"><a href=https://www.apache.org/events/current-event.html><img src=https://www.apache.org/events/current-event-234x60.png></a></div></div></div></footer></div><script src=/js/main.min.1b64887c572e23a206e20c997f04baa7fda8d02b725cfd4a4f71f036f2391251.js integrity="sha256-G2SIfFcuI6IG4gyZfwS6p/2o0CtyXP1KT3HwNvI5ElE=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/tabpane-persist.js></script></body></html>